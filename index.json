[{"content":"以前用家里闲置的笔记本玩过 lean 的软路由，但是需要电脑一直开着，不适合长期使用，所以我一直希望有一台真正可以刷入相关固件的路由器。相比网件、华硕等路由器，我简单的需求更适合 200 元左右的小米 AC2100。\n如何刷机 现在的刷机途径大致有 2 个：\n利用之前爆出的 CVE-2020-8597 漏洞开启 telnet 和 ssh 刷入 breed 或者 pb-boot，然后刷入想要的固件。 利用固件的 SSH 相关漏洞打开 SSH，然后刷入 breed 或者 pb-boot。 由于第一种方法需要较多的额外工具，我选择了第二种方法。\n刷入的固件也可以选择 pandvas 或者 Openwrt，现在 Openwrt 已经官方支持了 AC2100，所以刷入相关系统也是方便很多的。\n开启 ssh 电脑网口连接 Lan 口，浏览器打开 小米 AC2100 web 管理页面 ，简单设置后登录。\n在登录后的页面 F12 打开网页后台，在控制台（Console）复制粘贴如下代码，Enter 执行。\nfunction getSTOK() { let match = location.href.match(/;stok=(.*?)\\//); if (!match) { return null; } return match[1]; } function execute(stok, command) { command = encodeURIComponent(command); let path = `/cgi-bin/luci/;stok=${stok}/api/misystem/set_config_iotdev?bssid=SteelyWing\u0026amp;user_id=SteelyWing\u0026amp;ssid=-h%0A${command}%0A`; console.log(path); return fetch(new Request(location.origin + path)); } function enableSSH() { stok = getSTOK(); if (!stok) { console.error(\u0026#34;stok not found in URL\u0026#34;); return; } console.log(`stok = \u0026#34;${stok}\u0026#34;`); password = prompt(\u0026#34;Input new SSH password\u0026#34;); if (!password) { console.error(\u0026#34;You must input password\u0026#34;); return; } execute( stok, ` nvram set ssh_en=1 nvram commit sed -i \u0026#39;s/channel=.*/channel=\\\\\u0026#34;debug\\\\\u0026#34;/g\u0026#39; /etc/init.d/dropbear /etc/init.d/dropbear start ` ) .then((response) =\u0026gt; response.text()) .then((text) =\u0026gt; console.log(text)); console.log(\u0026#34;New SSH password: \u0026#34; + password); execute(stok, `echo -e \u0026#34;${password}\\\\n${password}\u0026#34; | passwd root`) .then((response) =\u0026gt; response.text()) .then((text) =\u0026gt; console.log(text)); } enableSSH(); 在网页上会弹出设置 root 账户密码的弹窗，设置后关闭。\n至此已经成功打开 SSH。\n上传固件并刷入 Breed 并设置 在本机命令行通过 ssh 登录路由器系统，账户为 root，密码即刚刚设置的。192.168.31.1 是路由器的默认内网 ip 地址。 ssh root@192.168.31.1 将本机的 breed 固件传输到 /tmp 目录下，执行如下命令： nvram set uart_en=1 nvram set bootdelay=5 nvram set flag_try_sys1_failed=1 nvram commit mtd -r write [上传到tmp目录的固件地址] kernel1 如果路由器在 60 秒内重启则代表刷 BREED 成功(灯会从蓝变橘，最终变蓝进入系统)。成功后拔掉电源，按住 reset 同时接上电源等 10 秒即可。\n最后，浏览器打开 breed web 管理页面，刷入 Breed 成功。 通过 Breed 刷入 Openwrt 进入 breed 后增加环境变量 xiaomi.r3g.bootfw，值为 2。 在固件项选择对应的底包，然后上传刷入，后面按照对应固件的提示操作即可 刷砖后恢复小米原厂系统 由于过程中随时存在刷砖的风险，所以去 官方下载页 可以下载使用对应的官方工具刷入官方的 rom 然后重头再来。\nReference 永久开启小米/红米 AC2100 TELNET 和 SSH，可升级、降级和恢复出厂 AX3600/AX1800/AX5/AC2100 官方固件开启 SSH 方法 AC2100 OpenWrt Guide 小米 红米【AC2100】一键刷 BREED【30 秒刷完】小白帅小伙专用 检查坏块 | 无需 Telnet breed 刷机红米 AC2100 小米 AC2100 原厂固件官方固 红米 AC2100 刷机及固件资源汇总附送 Lean 源码固件 红米/小米 AC2100 刷入 r3g breed 以及恢复官方 boot 详细教程 [AC2100(RM2100)] lienol源码主分支 红米AC2100固件 openwrt21.02 ipv6+文件助手+去广告+简洁主题 ","permalink":"https://zhiwenliang.github.io/posts/ac2100-breed-openwrt/","summary":"\u003cp\u003e以前用家里闲置的笔记本玩过 lean 的软路由，但是需要电脑一直开着，不适合长期使用，所以我一直希望有一台真正可以刷入相关固件的路由器。相比网件、华硕等路由器，我简单的需求更适合 200 元左右的小米 AC2100。\u003c/p\u003e","title":"小米 AC2100 刷入 Breed 和 Openwrt 小记"},{"content":"","permalink":"https://zhiwenliang.github.io/about/","summary":"about","title":"About"},{"content":"Blog 阮一峰的网络日志 我没有三颗心脏的博客 美团技术团队 捕蛇者说 构建我的被动收入 面向信仰编程 PowerShell 中文博客 树莓派实验室 | Raspberry Pi 中文资讯站，提供丰富的树莓派使用教程和 DIY 资讯 科技爱好者博客-专注于树莓派（Raspberry Pi） 创客百科 Opensource.com | Opensource.com Awesome Open Source iYouPort Harvard Business Review - Ideas and Advice for Leaders redhat-command_line heroes Bartosz Ciechanowski\u0026rsquo;s blog Book Library Genesis Library Genesis-is Library Genesis-fun Library Genesis-li Library Genesis-rs Library Genesis-st Library Genesis-me Index of /repository_torrent Electronic library. Download books free. Finding books 电子书库.免费下载图书.查找图书 Electronic library. Download books free. Finding books Electronic library. Download books free. Finding boooks zlibrary-mirror SciHub Love Science,Love Sci-Hub! – The latest Sci-Hub working domain sci-hub proxy:sci-hub links 2019 download,chrome extension Sci-Hub: removing barriers in the way of science Sci-Hub journal:latest sci-hub mirror links Sci-Hub: removing barriers in the way of science Others PDF Drive - Search and download PDF files for free. Gutenberg 书格 青空文庫 Aozora Bunko epubBooks - Download Free Kindle ePub eBooks ACM Books Aibooks 爱书屋 java 菜市场-专注于技术干货的免费分享 PDF 电子书下载 | 慧眼看 goodreads.cc - reading free books best novels online 我爱电子书 - 注重体验与质量的电子书资源下载网站 书栈网 · BookStack_程序员 IT 互联网开源编程书籍免费阅读与下载，取之于猿用之于猿！ 经济学人下载: The Economist Download 五子棋资料 经济学人下载-经济学人 PDF-经济学人音频-免费经济学人 Download PDF magazines and ebook free USA, UK, Australia and other ac2100 相关资源 Develop CodeForces Information 行业标准信息服务平台 走出去公共服务平台 Mirror Python 镜像 中国科技大学 - https://pypi.mirrors.ustc.edu.cn/simple/ 阿里云 - http://mirrors.aliyun.com/pypi/simple/ 豆瓣 - http://pypi.douban.com/simple/ 清华大学 - https://pypi.tuna.tsinghua.edu.cn/simple/ NPM 镜像 Taobao 源 - https://registry.npm.taobao.org 开源软件镜像 清华 - https://mirrors.tuna.tsinghua.edu.cn/ 中科大 - https://mirrors.ustc.edu.cn/ 北京外国语大学 - https://mirrors.bfsu.edu.cn/ 华为 - https://mirrors.huaweicloud.com/ Golang 镜像 七牛 - https://goproxy.cn 阿里 - mirrors.aliyun.com/goproxy/ 官方 - https://goproxy.io/ jfrog 维护 - https://gocenter.io Article Git 使用规范流程 - 阮一峰的网络日志 LinuxCommand.org: Learn the Linux command line. Write shell scripts. 如何向开源社区提问题 · Issue #545 · seajs/seajs ryanhanwu/How-To-Ask-Questions-The-Smart-Way: 如何向开源项目提交无法解答的问题 - 知乎 如何有效地报告 Bug Chinese copywriting guidelines for better written communication／中文文案排版指北 GitHub - sdmg15/Best-websites-a-programmer-should-visit: Some useful websites for programmers. Demonstrate all the questions on LeetCode in the form of animation.（用动画的形式呈现解 LeetCode 题目的思路） haoel/leetcode What are microservices? Developer Roadmaps 科学上网工具 Trojan 的安装与配置 – 乐在折腾 五大海外域名商，如何选择海外域名商 - 知乎 [AC2100(RM2100)] lienol 源码主分支 红米 AC2100 固件 openwrt21.02 ipv6+文件助手+去广告+简洁主题 22 个拓展程序员技术与视野的国外网站 Resume template for Chinese programmers 数字极权时代生存手记 3.0 The Learning Strategies Center Teach Yourself Computer Science 保姆级·图片素材处理思路 代码随想录 程序员必读书单 1.0 | lucida every-programmer-should-know Tool 龙轩导航-做个有用的导航 谷歌学术镜像 Devhints Vim Cheat Sheet Youtube Downloader - Online Youtube Video Downloader | YT1s.com Image Upload - SM.MS - Simple Free Image Hosting Favicon Generator for perfect icons on all browsers 冷熊简历 在线工具 - 你的工具箱 DataModel anywhere Tool.Graphics | Geometric Art 微图 最好用的极速图片压缩工具· 开发者工具箱 开发者武器库 · 属于程序员的工具箱 Swagger Editor 老马的工具 设计导航 各种词典文件收藏（访问密码：338766） freemdict forum kms 列表 UP 云搜 奈斯搜索 rutracker 下载吧_音乐免费下载 usbdev.ru appiu openwrt-firmware-kenzo Chess.com - Play Chess Online - Free Games examtopics mvcat 据意查句 反向词典 花瓣网 GGAC 爱校对 webstack-设计师网址导航 Learn X in Y minutes Nerd Fonts https://alternativeto.net/ tecent tools 67tool Fun 中华珍宝馆 - 首页-中华珍宝馆 World Digital Library Home Internet Archive: Digital Library of Free Borrowable Books, Movies, Music, Wayback Machine CS Unplugged 万词王 WantWords 在线微信对话生成器 - 新版 微信对话生成器在线微信转账生成器支付宝转账生成器_QQ 对话生成器 TownScaper ","permalink":"https://zhiwenliang.github.io/bookmark/","summary":"bookmark","title":"Bookmark"},{"content":"","permalink":"https://zhiwenliang.github.io/note/","summary":"note","title":"Note"}]